{"calculate":[{"assign_type":"double","assign_var":"usage","expr":{"type":"field","op":"value","name":"total_usage"}},{"expr":{"op":"+","lval":{"op":"+","lval":{"op":"+","lval":{"op":"+","lval":{"op":"+","lval":{"op":"+","rval":{"type":"field","op":"value","name":"nice_time"},"lval":{"lval":{"lval":{"op":"+","type":"expr","lval":{"rval":{"name":"guestNice_time","op":"value","type":"field"},"lval":{"name":"guest_time","op":"value","type":"field"},"type":"expr","op":"+"},"rval":{"type":"field","op":"value","name":"idle_time"}},"type":"expr","rval":{"name":"iowait_time","op":"value","type":"field"},"op":"+"},"type":"expr","rval":{"type":"field","op":"value","name":"irq_time"},"op":"+"},"type":"expr"},"type":"expr","rval":{"type":"field","name":"softirq_time","op":"value"}},"rval":{"name":"steal_time","op":"value","type":"field"},"type":"expr"},"type":"expr","rval":{"type":"field","name":"stolen_time","op":"value"}},"rval":{"type":"field","op":"value","name":"system_time"},"type":"expr"},"type":"expr","rval":{"type":"field","name":"user_time","op":"value"}},"assign_type":"double","assign_var":"total_cpu_time"},{"expr":{"op":"/","lval":{"type":"field","name":"idle_time","op":"value"},"rval":{"type":"field","name":"total_cpu_time","op":"value"},"type":"expr"},"assign_var":"idle","assign_type":"double"},{"assign_type":"double","assign_var":"iowait","expr":{"lval":{"name":"iowait_time","op":"value","type":"field"},"rval":{"type":"field","name":"total_cpu_time","op":"value"},"type":"expr","op":"/"}},{"assign_type":"double","assign_var":"stolen","expr":{"lval":{"name":"stolen_time","op":"value","type":"field"},"rval":{"name":"total_cpu_time","op":"value","type":"field"},"type":"expr","op":"/"}},{"assign_type":"double","assign_var":"system","expr":{"type":"expr","lval":{"op":"value","name":"system_time","type":"field"},"rval":{"type":"field","op":"value","name":"total_cpu_time"},"op":"/"}},{"expr":{"rval":{"op":"value","name":"total_cpu_time","type":"field"},"lval":{"type":"field","name":"user_time","op":"value"},"type":"expr","op":"/"},"assign_type":"double","assign_var":"user"},{"expr":{"op":"+","lval":{"val":200000,"op":"value","type":"int"},"type":"expr","rval":{"args":["bkclouds_cc_cache","biz_id","ip,plat_id,company_id","inner_ip,plat_id,company_id"],"type":"fun","method":"map","next":null}},"assign_type":"int","assign_var":"biz_id"}],"extract":{"type":"fun","next":{"name":"#branch1","next":[{"assign":[{"key":"ip","assign_to":"ip","is_dimension":1,"type":"string"},{"type":"int","is_dimension":1,"assign_to":"company_id","key":"bizid"},{"type":"int","is_dimension":1,"assign_to":"plat_id","key":"cloudid"}],"subtype":"assign_obj","type":"assign"},{"key":"data","type":"access","next":{"name":"#branch2","next":[{"assign":[{"key":"utctime","assign_to":"utctime","type":"string"}],"type":"assign","subtype":"assign_obj"},{"subtype":"access_obj","next":{"next":{"type":"assign","subtype":"assign_obj","assign":[{"type":"string","is_dimension":1,"assign_to":"hostname","key":"hostname"}]},"subtype":"access_obj","type":"access","key":"info"},"type":"access","key":"system"},{"type":"access","next":{"name":"#branch3","next":[{"subtype":"access_obj","next":{"subtype":"assign_obj","type":"assign","assign":[{"assign_to":"device_name","is_dimension":1,"type":"string","key":"cpu"},{"key":"guest","type":"double","assign_to":"guest_time"},{"key":"guestNice","assign_to":"guestNice_time","type":"double"},{"assign_to":"idle_time","type":"double","key":"idle"},{"key":"iowait","type":"double","assign_to":"iowait_time"},{"assign_to":"irq_time","type":"double","key":"irq"},{"key":"nice","assign_to":"nice_time","type":"double"},{"key":"softirq","type":"double","assign_to":"softirq_time"},{"type":"double","assign_to":"steal_time","key":"steal"},{"key":"stolen","assign_to":"stolen_time","type":"double"},{"key":"system","type":"double","assign_to":"system_time"},{"key":"user","type":"double","assign_to":"user_time"}]},"type":"access","key":"total_stat"},{"assign":[{"key":"total_usage","type":"double","assign_to":"total_usage"}],"type":"assign","subtype":"assign_obj"}],"type":"branch"},"subtype":"access_obj","key":"cpu"}],"type":"branch"},"subtype":"access_obj"}],"type":"branch"},"method":"from_json","args":[]},"conf":{"ignore_fields":["total_usage","guest_time","guestNice_time","idle_time","iowait_time","irq_time","nice_time","softirq_time","steal_time","stolen_time","system_time","user_time","total_cpu_time"],"time_field_name":"utctime","timezone":0,"timestamp_len":0,"output_field_name":"timestamp","encoding":"UTF8","time_format":"yyyy-MM-dd HH:mm:ss"}}