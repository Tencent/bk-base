{"extract":{"args":[],"method":"from_json","next":{"name":"#branch1","type":"branch","next":[{"subtype":"assign_obj","assign":[{"is_dimension":1,"type":"string","key":"ip","assign_to":"ip"},{"is_dimension":1,"type":"int","key":"bizid","assign_to":"company_id"},{"is_dimension":1,"type":"int","assign_to":"plat_id","key":"cloudid"}],"type":"assign"},{"subtype":"access_obj","type":"access","next":{"name":"#branch2","type":"branch","next":[{"assign":[{"key":"utctime","assign_to":"utctime","type":"string"}],"subtype":"assign_obj","type":"assign"},{"next":{"key":"info","type":"access","next":{"type":"assign","subtype":"assign_obj","assign":[{"is_dimension":1,"assign_to":"hostname","key":"hostname","type":"string"}]},"subtype":"access_obj"},"type":"access","key":"system","subtype":"access_obj"},{"subtype":"access_obj","next":{"subtype":"access_obj","key":"meminfo","next":{"subtype":"assign_obj","assign":[{"type":"long","key":"free","assign_to":"free"},{"type":"long","assign_to":"buffer","key":"buffers"},{"assign_to":"cached","key":"cached","type":"long"},{"assign_to":"total","key":"total","type":"long"},{"key":"available","assign_to":"usable","type":"long"},{"assign_to":"pct_used","key":"usedPercent","type":"double"},{"assign_to":"used","key":"used","type":"long"}],"type":"assign"},"type":"access"},"type":"access","key":"mem"}]},"key":"data"}]},"type":"fun"},"calculate":[{"assign_type":"int","assign_var":"biz_id","expr":{"type":"expr","lval":{"type":"int","op":"value","val":200000},"op":"+","rval":{"next":null,"type":"fun","args":["bkclouds_cc_cache","biz_id","ip,plat_id,company_id","inner_ip,plat_id,company_id"],"method":"map"}}},{"assign_var":"pct_usable","expr":{"op":"*","lval":{"op":"/","lval":{"type":"field","op":"value","name":"usable"},"type":"expr","rval":{"op":"value","type":"field","name":"total"}},"type":"expr","rval":{"val":100,"op":"value","type":"int"}},"assign_type":"double"},{"assign_type":"long","expr":{"rval":{"name":"free","type":"field","op":"value"},"lval":{"name":"total","op":"value","type":"field"},"type":"expr","op":"-"},"assign_var":"psc_used"},{"expr":{"rval":{"type":"int","val":100,"op":"value"},"lval":{"rval":{"name":"total","op":"value","type":"field"},"lval":{"rval":{"type":"field","op":"value","name":"free"},"type":"expr","lval":{"name":"total","type":"field","op":"value"},"op":"-"},"type":"expr","op":"/"},"type":"expr","op":"*"},"assign_var":"psc_pct_used","assign_type":"double"}],"conf":{"time_format":"yyyy-MM-dd HH:mm:ss","encoding":"UTF8","timezone":0,"timestamp_len":0,"time_field_name":"utctime","output_field_name":"timestamp"}}