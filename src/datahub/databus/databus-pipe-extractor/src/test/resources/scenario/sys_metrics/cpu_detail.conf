{"extract":{"type":"fun","method":"from_json","args":[],"next":{"next":[{"type":"assign","subtype":"assign_obj","assign":[{"assign_to":"ip","key":"ip","is_dimension":1,"type":"string"},{"assign_to":"company_id","type":"int","key":"bizid","is_dimension":1},{"assign_to":"plat_id","type":"int","is_dimension":1,"key":"cloudid"}]},{"next":{"name":"#branch2","type":"branch","next":[{"assign":[{"assign_to":"utctime","key":"utctime","type":"string"}],"subtype":"assign_obj","type":"assign"},{"next":{"next":{"assign":[{"type":"string","is_dimension":1,"key":"hostname","assign_to":"hostname"}],"subtype":"assign_obj","type":"assign"},"type":"access","subtype":"access_obj","key":"info"},"key":"system","subtype":"access_obj","type":"access"},{"next":{"type":"fun","method":"zip","next":{"args":[],"next":{"name":"#branch3","type":"branch","next":[{"next":{"assign":[{"assign_to":"per_usage","type":"double","index":0}],"type":"assign","subtype":"assign_pos"},"index":0,"subtype":"access_pos","type":"access"},{"index":1,"type":"access","subtype":"access_pos","next":{"assign":[{"assign_to":"device_name","type":"string","key":"cpu","is_dimension":1},{"key":"guest","type":"double","assign_to":"guest_time"},{"type":"double","key":"guestNice","assign_to":"guestNice_time"},{"type":"double","key":"idle","assign_to":"idle_time"},{"assign_to":"iowait_time","type":"double","key":"iowait"},{"type":"double","key":"irq","assign_to":"irq_time"},{"assign_to":"nice_time","key":"nice","type":"double"},{"key":"softirq","type":"double","assign_to":"softirq_time"},{"assign_to":"steal_time","key":"steal","type":"double"},{"type":"double","key":"stolen","assign_to":"stolen_time"},{"assign_to":"system_time","key":"system","type":"double"},{"type":"double","key":"user","assign_to":"user_time"}],"type":"assign","subtype":"assign_obj"}}]},"type":"fun","method":"iterate"},"args":["per_usage","per_stat"]},"key":"cpu","subtype":"access_obj","type":"access"}]},"type":"access","subtype":"access_obj","key":"data"}],"type":"branch","name":"#branch1"}},"conf":{"time_format":"yyyy-MM-dd HH:mm:ss","ignore_fields":["per_usage","guest_time","guestNice_time","idle_time","iowait_time","irq_time","nice_time","softirq_time","steal_time","stolen_time","system_time","user_time","total_cpu_time"],"timezone":0,"time_field_name":"utctime","encoding":"UTF8","output_field_name":"timestamp","timestamp_len":0},"calculate":[{"assign_var":"usage","expr":{"type":"field","name":"per_usage","op":"value"},"assign_type":"double"},{"expr":{"op":"+","rval":{"op":"value","name":"user_time","type":"field"},"lval":{"op":"+","rval":{"op":"value","type":"field","name":"system_time"},"type":"expr","lval":{"type":"expr","lval":{"op":"+","rval":{"type":"field","name":"steal_time","op":"value"},"type":"expr","lval":{"lval":{"op":"+","type":"expr","lval":{"op":"+","rval":{"name":"irq_time","type":"field","op":"value"},"type":"expr","lval":{"type":"expr","lval":{"op":"+","rval":{"name":"idle_time","type":"field","op":"value"},"lval":{"op":"+","type":"expr","lval":{"op":"value","name":"guest_time","type":"field"},"rval":{"type":"field","name":"guestNice_time","op":"value"}},"type":"expr"},"rval":{"type":"field","name":"iowait_time","op":"value"},"op":"+"}},"rval":{"op":"value","type":"field","name":"nice_time"}},"type":"expr","rval":{"name":"softirq_time","type":"field","op":"value"},"op":"+"}},"rval":{"type":"field","name":"stolen_time","op":"value"},"op":"+"}},"type":"expr"},"assign_var":"total_cpu_time","assign_type":"double"},{"assign_var":"idle","expr":{"op":"/","rval":{"name":"total_cpu_time","type":"field","op":"value"},"lval":{"op":"value","type":"field","name":"idle_time"},"type":"expr"},"assign_type":"double"},{"assign_type":"double","assign_var":"iowait","expr":{"op":"/","rval":{"type":"field","name":"total_cpu_time","op":"value"},"lval":{"type":"field","name":"iowait_time","op":"value"},"type":"expr"}},{"assign_type":"double","assign_var":"stolen","expr":{"rval":{"type":"field","name":"total_cpu_time","op":"value"},"type":"expr","lval":{"name":"stolen_time","type":"field","op":"value"},"op":"/"}},{"expr":{"op":"/","type":"expr","lval":{"op":"value","name":"system_time","type":"field"},"rval":{"name":"total_cpu_time","type":"field","op":"value"}},"assign_var":"system","assign_type":"double"},{"assign_var":"user","expr":{"rval":{"op":"value","name":"total_cpu_time","type":"field"},"lval":{"op":"value","type":"field","name":"user_time"},"type":"expr","op":"/"},"assign_type":"double"},{"assign_type":"int","assign_var":"biz_id","expr":{"type":"expr","lval":{"op":"value","val":200000,"type":"int"},"rval":{"next":null,"args":["bkclouds_cc_cache","biz_id","ip,plat_id,company_id","inner_ip,plat_id,company_id"],"method":"map","type":"fun"},"op":"+"}}]}