{"conf":{"time_format":"yyyy-MM-dd'T'HH:mm:ss","timestamp_len":0,"time_field_name":"utctime","timezone":0,"encoding":"UTF8","output_field_name":"timestamp"},"extract":{"args":[],"method":"from_json","type":"fun","next":{"next":[{"subtype":"assign_obj","type":"assign","assign":[{"key":"ip","is_dimension":1,"type":"string","assign_to":"ip"},{"type":"int","is_dimension":1,"key":"bizid","assign_to":"company_id"},{"assign_to":"plat_id","key":"cloudid","type":"int","is_dimension":1},{"assign_to":"utctime","type":"string","key":"@timestamp"}]},{"key":"beat","type":"access","next":{"type":"assign","assign":[{"is_dimension":1,"type":"string","key":"hostname","assign_to":"hostname"}],"subtype":"assign_obj"},"subtype":"access_obj"},{"type":"access","key":"metricset","next":{"subtype":"assign_obj","assign":[{"assign_to":"instance_id","key":"host","is_dimension":1,"type":"string"}],"type":"assign"},"subtype":"access_obj"},{"key":"mysql","type":"access","next":{"type":"access","key":"allstatus","next":{"subtype":"assign_obj","type":"assign","assign":[{"assign_to":"buffer_pool_free","key":"Innodb_buffer_pool_pages_free","type":"long"},{"assign_to":"buffer_pool_total","type":"long","key":"Innodb_buffer_pool_pages_total"},{"assign_to":"data_reads_cnt","key":"Innodb_data_reads_min","type":"long"},{"key":"Innodb_data_writes_min","type":"long","assign_to":"data_writes_cnt"},{"key":"Innodb_log_write_requests_min","type":"long","assign_to":"log_write_req_cnt"},{"assign_to":"pg_created_cnt","key":"Innodb_pages_created_min","type":"long"},{"assign_to":"pg_read_cnt","key":"Innodb_pages_read_min","type":"long"},{"assign_to":"pg_write_cnt","key":"Innodb_pages_written_min","type":"long"},{"assign_to":"rows_read_cnt","type":"long","key":"Innodb_rows_read_min"},{"assign_to":"rows_insert_cnt","type":"long","key":"Innodb_rows_inserted_min"},{"key":"Innodb_rows_deleted_min","type":"long","assign_to":"rows_del_cnt"},{"key":"Innodb_rows_updated_min","type":"long","assign_to":"rows_update_cnt"},{"type":"long","key":"Innodb_row_lock_waits_min","assign_to":"rows_locks_wait"}]},"subtype":"access_obj"},"subtype":"access_obj"}],"name":"#branch1","type":"branch"}},"calculate":[{"expr":{"rval":{"args":["bkclouds_cc_cache","biz_id","ip,plat_id,company_id","inner_ip,plat_id,company_id"],"next":null,"type":"fun","method":"map"},"op":"+","type":"expr","lval":{"type":"int","val":0,"op":"value"}},"assign_type":"int","assign_var":"biz_id"},{"assign_type":"long","assign_var":"buffer_pool_used","expr":{"type":"expr","lval":{"name":"buffer_pool_total","type":"field","op":"value"},"rval":{"op":"value","type":"field","name":"buffer_pool_free"},"op":"-"}},{"expr":{"type":"expr","lval":{"lval":{"name":"buffer_pool_total","type":"field","op":"value"},"type":"expr","rval":{"type":"field","name":"buffer_pool_free","op":"value"},"op":"-"},"rval":{"op":"value","name":"buffer_pool_total","type":"field"},"op":"/"},"assign_type":"long","assign_var":"buffer_pool_used"}]}